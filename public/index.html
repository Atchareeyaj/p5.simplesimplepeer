<html>
	<head>
		<script src="https://cdn.jsdelivr.net/npm/p5@1.1.9/lib/p5.js"></script>
		<script src="simplepeer.min.js"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="simplesimplepeer.js"></script>

		<script type="text/javascript">

			let video;
			let ovideo;

			function setup() {
				// Stream Video
				createCanvas(400, 300);
				video = createCapture(VIDEO, function(stream) {
					ssp = new SimpleSimplePeer(this,SimpleSimplePeer.CAPTURE,stream)
					ssp.on('stream', gotStream);
				});  
				video.muted = true;     
				video.hide();

				// OR //

				// Stream Canvas
				// let c = createCanvas(400, 300);
				// video = createCapture(VIDEO);
				// video.muted = true;     
				// video.hide();				
				// ssp = new SimpleSimplePeer(this,SimpleSimplePeer.CANVAS,c);
				// ssp.on('stream', gotStream);
			}

			function draw() {
				image(video,0,0,width,height);
				ellipse(mouseX,mouseY,100,100);
				if (ovideo != null) {
					rect(10,10,10,10);
					//image(img, dx, dy, dWidth, dHeight, sx, sy, [sWidth], [sHeight])
					image(ovideo,width/2,height/2,width/2,height/2,0,0,width/2,height/2);
				}
			}		
			
			// We got a new stream!
			function gotStream(stream) {
				print("gotStream");
				// This is just like a video/stream from createCapture(VIDEO)
				ovideo = stream;
				print(ovideo);
				//let videoEl = new p5.MediaElement(domElement, this);
				//ovideo.hide();
			}

		</script>
	</head>
  <body>

  </body>
</html>